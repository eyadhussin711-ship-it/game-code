<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QUEEN System</title>

<style>
*{box-sizing:border-box;font-family:Tajawal, Tahoma}
body{
  margin:0;
  min-height:100vh;
  background:
    radial-gradient(circle at top,#0a3d62,#020824 60%),
    linear-gradient(270deg,#000,#001a33,#000);
  background-size:200% 200%;
  animation:bgMove 15s ease infinite;
  color:#fff;
}
@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

.wrap{max-width:430px;margin:auto;padding:15px}
.box{
  background:rgba(0,0,0,.75);
  padding:20px;
  border-radius:18px;
  box-shadow:0 0 30px rgba(0,120,255,.25);
}

.logo{
  text-align:center;
  font-size:30px;
  color:#ff2d2d;
  animation:glow 2s infinite alternate;
  margin-bottom:10px;
}
@keyframes glow{
  from{text-shadow:0 0 5px #ff2d2d}
  to{text-shadow:0 0 20px #ff2d2d}
}

input,select,button,textarea{
  width:100%;
  padding:13px;
  margin:6px 0;
  border:none;
  border-radius:12px;
  font-size:14px;
}
input,textarea,select{background:#020d1f;color:#fff}
button{
  background:#1e90ff;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
button.red{background:#c0392b}

.nav{
  display:flex;
  gap:6px;
  margin-bottom:10px;
}
.nav button{flex:1}

.section{display:none}
.section.active{display:block}

.item{
  background:#020d1f;
  padding:12px;
  border-radius:12px;
  margin:6px 0;
}

.small{font-size:12px;opacity:.8}

/* ÙÙˆØ±Ù… Ø¬Ø§Ù†Ø¨ÙŠ */
.sideForm{
  background:#00162e;
  padding:15px;
  border-radius:14px;
  margin-top:10px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox">
  <div class="wrap">
    <div class="box">
      <div class="logo">QUEEN</div>
      <input id="nameInput" placeholder="Ø§Ø³Ù…Ùƒ">
      <input id="codeInput" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
      <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    </div>
  </div>
</div>

<!-- APP -->
<div id="app" style="display:none">
  <div class="wrap">

    <div class="nav">
      <button onclick="show('rooms')">ğŸ¨</button>
      <button onclick="show('news')">ğŸ“°</button>
      <button id="ordersBtn" style="display:none" onclick="show('orders')">ğŸ§¾</button>
      <button onclick="logout()">ğŸšª</button>
    </div>

    <!-- ROOMS -->
    <div id="rooms" class="section active">
      <h3>Ø§Ù„ØºØ±Ù</h3>
      <div id="roomsList"></div>
      <div id="roomForm"></div>
    </div>

    <!-- NEWS -->
    <div id="news" class="section">
      <h3>Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h3>
      <div id="newsList"></div>
      <div id="newsForm" style="display:none">
        <textarea id="newsText" placeholder="Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯"></textarea>
        <button onclick="addNews()">Ù†Ø´Ø±</button>
      </div>
    </div>

    <!-- ORDERS -->
    <div id="orders" class="section">
      <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
      <div id="ordersList"></div>
    </div>

  </div>
</div>

<script>
/* ===== CODES ===== */
const CODES={
  "QUEEN-HOTEL":"hotel",
  "QUEEN-CAFE":"cafe",
  "QUEEN-OWNER":"owner"
};

/* ===== LOGIN ===== */
function login(){
  const name=nameInput.value.trim();
  if(!name){alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ");return;}

  let role="client";
  if(codeInput.value && CODES[codeInput.value]){
    role=CODES[codeInput.value];
  }

  localStorage.setItem("user",name);
  localStorage.setItem("role",role);
  start();
}

/* ===== START ===== */
function start(){
  loginBox.style.display="none";
  app.style.display="block";

  if(localStorage.role!=="client"){
    ordersBtn.style.display="block";
  }
  if(localStorage.role==="hotel"||localStorage.role==="owner"){
    newsForm.style.display="block";
  }
  renderAll();
}

/* ===== NAV ===== */
function show(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* ===== ROOMS ===== */
function renderRooms(){
  roomsList.innerHTML="";
  for(let i=1;i<=12;i++){
    roomsList.innerHTML+=`
      <div class="item" onclick="openRoom(${i})">
        ØºØ±ÙØ© Ø±Ù‚Ù… ${i}
      </div>`;
  }
}

function openRoom(num){
  if(localStorage.role!=="client"){
    alert("Ø§Ù„Ø­Ø¬Ø² Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙ‚Ø·");
    return;
  }
  roomForm.innerHTML=`
    <div class="sideForm">
      <h4>Ø­Ø¬Ø² ØºØ±ÙØ© ${num}</h4>
      <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
      <input id="from" type="date">
      <input id="to" type="date">
      <button onclick="sendBooking(${num})">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
  `;
}

function sendBooking(room){
  if(!phone.value||!from.value||!to.value){
    alert("ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    return;
  }
  saveOrder("Ø­Ø¬Ø² ØºØ±ÙØ©","ØºØ±ÙØ© "+room,localStorage.user);
  alert("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„");
  roomForm.innerHTML="";
}

/* ===== ORDERS ===== */
function saveOrder(type,item,user){
  const arr=JSON.parse(localStorage.getItem("orders")||"[]");
  arr.push({type,item,user,time:new Date().toLocaleString()});
  localStorage.setItem("orders",JSON.stringify(arr));
  renderOrders();
}

function renderOrders(){
  ordersList.innerHTML="";
  const role=localStorage.role;
  const arr=JSON.parse(localStorage.getItem("orders")||"[]");

  arr.forEach(o=>{
    if(role==="hotel" && o.type!=="Ø­Ø¬Ø² ØºØ±ÙØ©")return;
    if(role==="cafe" && o.type!=="Ø·Ù„Ø¨ ÙƒØ§ÙÙŠÙ‡")return;
    if(role==="client")return;

    ordersList.innerHTML+=`
      <div class="item small">
        ${o.type} | ${o.item} | ${o.user}<br>${o.time}
      </div>`;
  });
}

/* ===== NEWS ===== */
function addNews(){
  if(!newsText.value)return;
  const n=JSON.parse(localStorage.getItem("news")||"[]");
  n.unshift(newsText.value);
  localStorage.setItem("news",JSON.stringify(n));
  newsText.value="";
  renderNews();
}
function renderNews(){
  newsList.innerHTML="";
  const n=JSON.parse(localStorage.getItem("news")||"[]");
  n.forEach(x=>newsList.innerHTML+=`<div class="item">${x}</div>`);
}

/* ===== RENDER ALL ===== */
function renderAll(){
  renderRooms();
  renderOrders();
  renderNews();
}

/* ğŸ”„ ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ */
setInterval(()=>{
  if(localStorage.role!=="client") renderOrders();
  renderNews();
},2000);

/* ===== LOGOUT ===== */
function logout(){
  localStorage.clear();
  location.reload();
}

window.onload=()=>{
  if(localStorage.user) start();
}
</script>

</body>
</html>
