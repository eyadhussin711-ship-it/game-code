<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QUEEN HOTEL</title>

<style>
*{box-sizing:border-box;font-family:Tahoma}

/* ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø®Ù„ÙÙŠØ© */
#bgVideo{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  object-fit:cover;
  z-index:-2;
}

/* Ø·Ø¨Ù‚Ø© ØªØ¹ØªÙŠÙ… */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  z-index:-1;
}

body{
  margin:0;
  min-height:100vh;
  color:#fff;
}

.wrap{max-width:420px;margin:auto;padding:15px}

.box{
  background:rgba(0,0,0,.75);
  padding:20px;
  border-radius:18px;
}

/* Ù„ÙˆØ¬Ùˆ */
.logo{
  text-align:center;
  font-size:30px;
  color:red;
  animation:glow 2s infinite alternate;
  margin-bottom:10px;
}
@keyframes glow{
  from{text-shadow:0 0 5px red}
  to{text-shadow:0 0 20px red}
}

input,button,textarea{
  width:100%;
  padding:13px;
  margin:6px 0;
  border:none;
  border-radius:12px;
  font-size:14px;
}
input,textarea{background:#020d1f;color:#fff}

button{
  background:#1e90ff;
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}

.nav{
  display:flex;
  gap:6px;
  margin-bottom:10px;
}
.nav button{flex:1}

.section{display:none}
.section.active{display:block}

.item{
  background:#020d1f;
  padding:12px;
  border-radius:12px;
  margin:6px 0;
}

.small{font-size:12px;opacity:.8}

/* ÙÙˆØ±Ù… Ø¬Ø§Ù†Ø¨ÙŠ */
.sideForm{
  background:#00162e;
  padding:15px;
  border-radius:14px;
  margin-top:10px;
}

/* Ù…ÙˆØ¨Ø§ÙŠÙ„ */
@media(max-width:600px){
  .wrap{max-width:100%}
}
</style>
</head>

<body>

<!-- ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø®Ù„ÙÙŠØ© -->
<video autoplay muted loop playsinline id="bgVideo">
  <source src="ain-sokhna.mp4" type="video/mp4">
</video>

<!-- LOGIN -->
<div id="loginBox">
  <div class="wrap">
    <div class="box">
      <div class="logo">QUEEN</div>
      <input id="nameInput" placeholder="Ø§Ø³Ù…Ùƒ">
      <input id="codeInput" placeholder="ÙƒÙˆØ¯ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
      <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    </div>
  </div>
</div>

<!-- APP -->
<div id="app" style="display:none">
  <div class="wrap">

    <div class="nav">
      <button onclick="show('rooms')">ğŸ¨</button>
      <button onclick="show('news')">ğŸ“°</button>
      <button id="ordersBtn" style="display:none" onclick="show('orders')">ğŸ§¾</button>
      <button onclick="logout()">ğŸšª</button>
    </div>

    <!-- ROOMS -->
    <div id="rooms" class="section active">
      <h3>Ø§Ù„ØºØ±Ù</h3>
      <div id="roomsList"></div>
      <div id="roomForm"></div>
    </div>

    <!-- NEWS -->
    <div id="news" class="section">
      <h3>Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h3>
      <div id="newsList"></div>
      <div id="newsForm" style="display:none">
        <textarea id="newsText" placeholder="Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯"></textarea>
        <button onclick="addNews()">Ù†Ø´Ø±</button>
      </div>
    </div>

    <!-- ORDERS -->
    <div id="orders" class="section">
      <h3>Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h3>
      <div id="ordersList"></div>
    </div>

  </div>
</div>

<script>
/* Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ */
const CODES={
  "QUEEN-HOTEL":"hotel",
  "QUEEN-CAFE":"cafe",
  "QUEEN-OWNER":"owner"
};

/* ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ */
function login(){
  const name=nameInput.value.trim();
  if(!name){alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ");return;}

  let role="client";
  if(codeInput.value && CODES[codeInput.value]){
    role=CODES[codeInput.value];
  }

  localStorage.setItem("user",name);
  localStorage.setItem("role",role);
  start();
}

/* Ø¨Ø¯Ø¡ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
function start(){
  loginBox.style.display="none";
  app.style.display="block";

  if(localStorage.role!=="client"){
    ordersBtn.style.display="block";
  }
  if(localStorage.role==="hotel"||localStorage.role==="owner"){
    newsForm.style.display="block";
  }
  renderAll();
}

/* ØªÙ†Ù‚Ù„ */
function show(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* Ø§Ù„ØºØ±Ù */
function renderRooms(){
  roomsList.innerHTML="";
  for(let i=1;i<=12;i++){
    roomsList.innerHTML+=`
      <div class="item" onclick="openRoom(${i})">
        ØºØ±ÙØ© Ø±Ù‚Ù… ${i}
      </div>`;
  }
}

function openRoom(num){
  if(localStorage.role!=="client"){
    alert("Ø§Ù„Ø­Ø¬Ø² Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙÙ‚Ø·");
    return;
  }
  roomForm.innerHTML=`
    <div class="sideForm">
      <h4>Ø­Ø¬Ø² ØºØ±ÙØ© ${num}</h4>
      <input id="phone" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
      <input id="from" type="date">
      <input id="to" type="date">
      <button onclick="sendBooking(${num})">Ø¥Ø±Ø³Ø§Ù„</button>
    </div>
  `;
}

/* Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø¬Ø² */
function sendBooking(room){
  if(!phone.value||!from.value||!to.value){
    alert("ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª");
    return;
  }

  saveOrder(
    "Ø­Ø¬Ø² ØºØ±ÙØ©",
    "ØºØ±ÙØ© Ø±Ù‚Ù… "+room,
    localStorage.user
  );

  alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø¬Ø² âœ…");
  roomForm.innerHTML="";
}

/* Ø­ÙØ¸ Ø§Ù„Ø·Ù„Ø¨ */
function saveOrder(type,item,user){
  const arr=JSON.parse(localStorage.getItem("orders")||"[]");
  arr.push({
    type,item,user,
    time:new Date().toLocaleString()
  });
  localStorage.setItem("orders",JSON.stringify(arr));
  renderOrders();
}

/* Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª */
function renderOrders(){
  ordersList.innerHTML="";
  const role=localStorage.role;
  const arr=JSON.parse(localStorage.getItem("orders")||"[]");

  arr.forEach(o=>{
    if(role==="hotel" && o.type!=="Ø­Ø¬Ø² ØºØ±ÙØ©") return;
    if(role==="client") return;

    ordersList.innerHTML+=`
      <div class="item small">
        ${o.type}<br>
        ${o.item}<br>
        ${o.user}<br>
        ${o.time}
      </div>
    `;
  });
}

/* Ø§Ù„Ø£Ø®Ø¨Ø§Ø± */
function addNews(){
  if(!newsText.value)return;
  const n=JSON.parse(localStorage.getItem("news")||"[]");
  n.unshift(newsText.value);
  localStorage.setItem("news",JSON.stringify(n));
  newsText.value="";
  renderNews();
}
function renderNews(){
  newsList.innerHTML="";
  const n=JSON.parse(localStorage.getItem("news")||"[]");
  n.forEach(x=>newsList.innerHTML+=`<div class="item">${x}</div>`);
}

/* Ø±Ø³Ù… Ø§Ù„ÙƒÙ„ */
function renderAll(){
  renderRooms();
  renderOrders();
  renderNews();
}

/* ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ */
setInterval(()=>{
  if(localStorage.role!=="client") renderOrders();
  renderNews();
},2000);

/* Ø®Ø±ÙˆØ¬ */
function logout(){
  localStorage.clear();
  location.reload();
}

window.onload=()=>{
  if(localStorage.user) start();
}
</script>

</body>
</html>
