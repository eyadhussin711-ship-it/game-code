<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>UC Store System</title>

<style>
*{box-sizing:border-box;font-family:Arial}
body{
  margin:0;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}
.hidden{display:none}

/* Login */
#login{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.login-box{
  width:340px;
  background:rgba(255,255,255,.12);
  padding:25px;
  border-radius:18px;
  text-align:center;
}
.login-box input{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:none;
  border-radius:10px;
}
.login-box button{
  width:100%;
  padding:12px;
  border:none;
  border-radius:20px;
  background:#00f5ff;
  font-weight:bold;
}

/* App */
#app{display:flex;height:100vh}

/* Sidebar */
.sidebar{
  width:230px;
  background:rgba(0,0,0,.45);
  padding:15px;
}
.sidebar button{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:none;
  border-radius:14px;
  background:rgba(255,255,255,.15);
  color:#fff;
  font-weight:bold;
  cursor:pointer;
}
.sidebar button.active{
  background:#00f5ff;
  color:#000;
  box-shadow:0 0 12px #00f5ff;
}

/* Main */
.main{flex:1;padding:20px;overflow:auto}
.section{display:none}
.section.active{display:block}

/* Cards */
.card{
  background:rgba(255,255,255,.1);
  padding:15px;
  border-radius:12px;
  margin:10px 0;
  cursor:pointer;
}

/* Owner panel */
.user-card{
  background:rgba(255,255,255,.12);
  padding:10px;
  border-radius:10px;
  margin:8px 0;
}
.actions button{
  margin:4px;
  padding:6px 10px;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <div class="login-box">
    <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
    <input id="user" placeholder="Ø§Ù„Ø§Ø³Ù… Ø£Ùˆ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„">
    <input id="code" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø£ÙˆÙ†Ø± (Ù„Ùˆ Ù…ÙˆØ¬ÙˆØ¯)">
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
  </div>
</div>

<!-- APP -->
<div id="app" class="hidden">
  <div class="sidebar">
    <button class="nav active" onclick="openSec('store',this)">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</button>
    <button class="nav" onclick="openSec('ticket',this)">ğŸ§¾ Ø§Ù„Ø´ÙƒØ§ÙˆÙ‰</button>
    <button class="nav ownerOnly hidden" onclick="openSec('users',this)">ğŸ‘¥ Ø§Ù„Ù†Ø§Ø³</button>
    <button onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
  </div>

  <div class="main">
    <h2>Ø£Ù‡Ù„Ø§Ù‹ <span id="username"></span> | <span id="role"></span></h2>

    <!-- STORE -->
    <div id="store" class="section active">
      <div class="card">60 UC</div>
      <div class="card">300 UC</div>
      <div class="card">600 UC</div>
    </div>

    <!-- TICKETS -->
    <div id="ticket" class="section">
      <h3>ÙØªØ­ Ø´ÙƒÙˆÙ‰</h3>
      <input id="tmsg" placeholder="Ø§ÙƒØªØ¨ Ù…Ø´ÙƒÙ„ØªÙƒ">
      <button onclick="sendTicket()">Ø¥Ø±Ø³Ø§Ù„</button>
      <div id="tickets"></div>
    </div>

    <!-- USERS (OWNER ONLY) -->
    <div id="users" class="section">
      <h3>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù†Ø§Ø³</h3>
      <div id="userList"></div>
    </div>
  </div>
</div>

<script>
const OWNER_CODE="OWNER-999";

function login(){
  let u=user.value.trim(), c=code.value.trim();
  if(!u)return alert("Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù…");

  let role="Player";
  if(c){
    if(c!==OWNER_CODE)return alert("ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­");
    role="Owner";
  }

  localStorage.user=u;
  localStorage.role=role;

  let users=JSON.parse(localStorage.users||"[]");
  if(!users.find(x=>x.name===u)){
    users.push({name:u,role:"Player",banned:false});
    localStorage.users=JSON.stringify(users);
  }

  start();
}

function start(){
  login.style.display="none";
  app.classList.remove("hidden");
  username.innerText=localStorage.user;
  role.innerText=localStorage.role;

  if(localStorage.role==="Owner")
    document.querySelector(".ownerOnly").classList.remove("hidden");

  renderUsers();
}

function logout(){localStorage.removeItem("user");localStorage.removeItem("role");location.reload();}

function openSec(id,btn){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll(".nav").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
}

function sendTicket(){
  let arr=JSON.parse(localStorage.tickets||"[]");
  arr.push({user:localStorage.user,msg:tmsg.value});
  localStorage.tickets=JSON.stringify(arr);
  alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰");
}

function renderUsers(){
  if(localStorage.role!=="Owner")return;
  let box=document.getElementById("userList");
  let users=JSON.parse(localStorage.users||"[]");
  box.innerHTML="";
  users.forEach(u=>{
    box.innerHTML+=`
      <div class="user-card">
        <b>${u.name}</b> | ${u.role}
        <div class="actions">
          <button onclick="setRole('${u.name}','Helper')">ØªÙˆØ¸ÙŠÙ</button>
          <button onclick="setRole('${u.name}','Admin')">ØªØ±Ù‚ÙŠØ©</button>
          <button onclick="setRole('${u.name}','Player')">ÙØµÙ„</button>
          <button onclick="ban('${u.name}')">Ø­Ø¸Ø±</button>
        </div>
      </div>
    `;
  });
}

function setRole(name,role){
  let users=JSON.parse(localStorage.users);
  users.forEach(u=>{if(u.name===name)u.role=role});
  localStorage.users=JSON.stringify(users);
  renderUsers();
}

function ban(name){
  let users=JSON.parse(localStorage.users);
  users.forEach(u=>{if(u.name===name)u.banned=true});
  localStorage.users=JSON.stringify(users);
  alert("ØªÙ… Ø§Ù„Ø­Ø¸Ø±");
  renderUsers();
}

window.onload=()=>localStorage.user&&start();
</script>

</body>
</html>
