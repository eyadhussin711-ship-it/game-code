<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Queen Hotel</title>

<style>
*{box-sizing:border-box;font-family:Tahoma}
body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(270deg,#000,#1a0000,#000);
  background-size:400% 400%;
  animation:bg 10s ease infinite;
  color:#fff;
}
@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.wrap{max-width:420px;margin:auto;padding:15px}
.box{background:rgba(0,0,0,.8);padding:25px;border-radius:18px}
h1{color:red;text-align:center;margin:0 0 10px}
input,button,textarea{
  width:100%;padding:14px;margin:6px 0;
  border:none;border-radius:12px;font-size:15px;
}
button{background:red;color:#fff;font-weight:bold;cursor:pointer}
button.smallBtn{padding:8px;font-size:13px;margin-top:8px}
.nav{display:flex;gap:5px;margin-bottom:10px}
.nav button{flex:1}
.section{display:none}
.section.active{display:block}
.item{
  background:#1f0000;
  padding:12px;border-radius:12px;margin:6px 0
}
.small{font-size:12px;opacity:.8}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox">
  <div class="wrap">
    <div class="box">
      <h1>QUEEN HOTEL</h1>
      <p class="small">Ø§ÙƒØªØ¨ Ø§Ù„Ø§Ø³Ù… ÙÙ‚Ø· â€“ ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¸Ù Ø®Ø§Øµ</p>
      <input id="nameInput" placeholder="Ø§Ø³Ù…Ùƒ">
      <input id="codeInput" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ù…ÙˆØ¸Ù (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
      <button onclick="doLogin()">Ø¯Ø®ÙˆÙ„</button>
    </div>
  </div>
</div>

<!-- APP -->
<div id="app" style="display:none">
  <div class="wrap">

    <div class="nav">
      <button onclick="showSection('rooms')">ğŸ¨</button>
      <button onclick="showSection('cafe')">â˜•</button>
      <button onclick="showSection('news')">ğŸ“°</button>
      <button id="ordersBtn" style="display:none" onclick="showSection('orders')">ğŸ§¾</button>
      <button onclick="logout()">ğŸšª</button>
    </div>

    <div id="rooms" class="section active">
      <h3>ØºØ±Ù Ø§Ù„ÙÙ†Ø¯Ù‚</h3>
      <div id="roomsList"></div>
    </div>

    <div id="cafe" class="section">
      <h3>Ø§Ù„ÙƒØ§ÙÙŠÙ‡</h3>
      <div id="menuList"></div>
    </div>

    <div id="news" class="section">
      <h3>ğŸ“° Ø§Ù„Ø£Ø®Ø¨Ø§Ø±</h3>
      <div id="newsList"></div>
      <div id="newsForm" style="display:none">
        <textarea id="newsText" placeholder="Ø§ÙƒØªØ¨ Ø®Ø¨Ø± Ø¬Ø¯ÙŠØ¯"></textarea>
        <button onclick="addNews()">Ù†Ø´Ø±</button>
      </div>
    </div>

    <div id="orders" class="section">
      <h3>ğŸ§¾ Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Ù„Ù„Ù…ÙˆØ¸ÙÙŠÙ†)</h3>
      <div id="ordersList"></div>
    </div>

  </div>
</div>

<script>
const STAFF_CODE = "QUEEN-STAFF";
const DRINKS = ["Ø´Ø§ÙŠ","Ù‚Ù‡ÙˆØ©","Ø¨ÙŠØ¨Ø³ÙŠ","Ù…ÙŠØ§Ù‡"];

function doLogin(){
  const name = nameInput.value.trim();
  if(!name){ alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ"); return; }

  const role = (codeInput.value === STAFF_CODE) ? "staff" : "guest";
  localStorage.setItem("user", name);
  localStorage.setItem("role", role);
  startApp();
}

function startApp(){
  loginBox.style.display="none";
  app.style.display="block";

  if(localStorage.getItem("role")==="staff"){
    ordersBtn.style.display="block";
    newsForm.style.display="block";
  }
  renderAll();
}

function showSection(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

function renderRooms(){
  roomsList.innerHTML="";
  for(let i=1;i<=12;i++){
    roomsList.innerHTML += `<div class="item">ØºØ±ÙØ© Ø±Ù‚Ù… ${i}</div>`;
  }
}

function renderMenu(){
  menuList.innerHTML="";
  DRINKS.forEach(d=>{
    menuList.innerHTML += `
      <div class="item">
        ${d}
        <button class="smallBtn" onclick="makeOrder('${d}')">Ø·Ù„Ø¨</button>
      </div>`;
  });
}

function makeOrder(drink){
  let room = prompt("Ø§Ø®ØªØ± Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ© Ù…Ù† 1 Ø¥Ù„Ù‰ 12");
  room = Number(room);
  if(!Number.isInteger(room) || room<1 || room>12){
    alert("Ø±Ù‚Ù… ØºØ±ÙØ© ØºÙŠØ± ØµØ­ÙŠØ­");
    return;
  }

  const orders = JSON.parse(localStorage.getItem("orders") || "[]");
  orders.push({
    user: localStorage.getItem("user"),
    room,
    drink,
    time: new Date().toLocaleTimeString()
  });
  localStorage.setItem("orders", JSON.stringify(orders));

  alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ âœ”ï¸");
  renderOrders();
}

function renderOrders(){
  ordersList.innerHTML="";
  if(localStorage.getItem("role")!=="staff") return;

  const orders = JSON.parse(localStorage.getItem("orders") || "[]");
  orders.forEach(o=>{
    ordersList.innerHTML += `
      <div class="item small">
        ${o.user} | ØºØ±ÙØ© ${o.room} | ${o.drink} | ${o.time}
      </div>`;
  });
}

function addNews(){
  const txt = newsText.value.trim();
  if(!txt) return;

  const news = JSON.parse(localStorage.getItem("news") || "[]");
  news.unshift(txt);
  localStorage.setItem("news", JSON.stringify(news));
  newsText.value="";
  renderNews();
}

function renderNews(){
  newsList.innerHTML="";
  const news = JSON.parse(localStorage.getItem("news") || "[]");
  news.forEach(n=>{
    newsList.innerHTML += `<div class="item">${n}</div>`;
  });
}

function renderAll(){
  renderRooms();
  renderMenu();
  renderOrders();
  renderNews();
}

setInterval(()=>{
  renderOrders();
  renderNews();
},5000);

function logout(){
  localStorage.clear();
  location.reload();
}

window.onload = ()=>{
  if(localStorage.getItem("user")){
    startApp();
  }
};
  <!-- ÙƒÙˆØ¯ Firebase -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, serverTimestamp } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyBA2YeC6Mo8CZi7Ms5Gckhm4SWPmLgFNcE",
  authDomain: "queenhotel-5703c.firebaseapp.com",
  projectId: "queenhotel-5703c",
  storageBucket: "queenhotel-5703c.firebasestorage.app",
  messagingSenderId: "1024771547857",
  appId: "1:1024771547857:web:8dd74f752bf0a4b6999bf0"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

/* === Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ === */
window.makeOrder = async function(drink){
  let room = prompt("Ø§Ø®ØªØ± Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ© Ù…Ù† 1 Ø¥Ù„Ù‰ 12");
  room = Number(room);
  if(!room || room < 1 || room > 12){
    alert("Ø±Ù‚Ù… Ø§Ù„ØºØ±ÙØ© ØºÙ„Ø·");
    return;
  }

  await addDoc(collection(db,"orders"),{
    user: localStorage.getItem("user"),
    room,
    drink,
    time: serverTimestamp()
  });

  alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ âœ…");
};

/* === Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª (Live) === */
const ordersList = document.getElementById("ordersList");
onSnapshot(collection(db,"orders"), snap=>{
  if(!ordersList) return;
  ordersList.innerHTML="";
  snap.forEach(doc=>{
    const o = doc.data();
    ordersList.innerHTML += `
      <div class="item small">
        ${o.user} | ØºØ±ÙØ© ${o.room} | ${o.drink}
      </div>`;
  });
});
\</script>

</body>
</html>

