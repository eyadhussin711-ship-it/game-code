<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>UC Store</title>

<style>
*{box-sizing:border-box;font-family:Arial}
body{
  margin:0;
  height:100vh;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}

/* LOGIN */
#login{
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.login-box{
  width:330px;
  background:#1f3b4d;
  padding:25px;
  border-radius:14px;
  text-align:center;
}
.login-box input,
.login-box button{
  width:100%;
  padding:12px;
  margin:8px 0;
  border:none;
  border-radius:10px;
}
.login-box button{
  background:#00f5ff;
  font-weight:bold;
  cursor:pointer;
}

/* APP */
#app{display:none;height:100vh}
.app{display:flex;height:100%}

/* SIDEBAR */
.sidebar{
  width:230px;
  background:#102a36;
  padding:15px;
}
.sidebar h3{text-align:center;margin-bottom:20px}
.sidebar button{
  width:100%;
  margin:6px 0;
  padding:10px;
  border:none;
  border-radius:10px;
  background:#00f5ff;
  font-weight:bold;
  cursor:pointer;
}

/* CONTENT */
.content{flex:1;padding:20px}
.section{display:none}
.section.active{display:block}

.card{
  background:#1f3b4d;
  padding:15px;
  border-radius:12px;
  margin:10px 0;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.buy{
  background:#ffd166;
  border:none;
  padding:8px 16px;
  border-radius:20px;
  cursor:pointer;
}

/* CHAT */
.chat{
  background:#0f2027;
  padding:10px;
  border-radius:10px;
  height:200px;
  overflow:auto;
  margin-bottom:8px;
}
.msg{margin:4px 0}
.me{color:#00f5ff}
.admin{color:#ffd166}

/* FOOTER */
.footer{
  position:fixed;
  bottom:5px;
  right:10px;
  font-size:12px;
  opacity:.7;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <div class="login-box">
    <h3>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h3>
    <input id="username" placeholder="Ø§Ø³Ù…Ùƒ">
    <input id="code" placeholder="ÙƒÙˆØ¯ Ø§Ù„Ø£ÙˆÙ†Ø± (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)">
    <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>
    <small>Developer: Eyad Abo Gad</small>
  </div>
</div>

<!-- APP -->
<div id="app">
  <div class="app">

    <!-- SIDEBAR -->
    <div class="sidebar">
      <h3>UC STORE</h3>
      <button onclick="openSec('store')">ğŸ›’ Ø§Ù„Ù…ØªØ¬Ø±</button>
      <button onclick="openSec('tickets')">ğŸ§¾ Ø§Ù„Ø´ÙƒØ§ÙˆÙŠ</button>
      <button id="ownerBtn" style="display:none" onclick="openSec('admin')">ğŸ‘‘ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
      <button onclick="logout()">ğŸšª Ø®Ø±ÙˆØ¬</button>
    </div>

    <!-- CONTENT -->
    <div class="content">

      <!-- STORE -->
      <div id="store" class="section active">
        <h2 id="welcome"></h2>
        <div class="card"><span>60 UC</span><button class="buy" onclick="sound()">Ø´Ø±Ø§Ø¡</button></div>
        <div class="card"><span>300 UC</span><button class="buy" onclick="sound()">Ø´Ø±Ø§Ø¡</button></div>
        <div class="card"><span>600 UC</span><button class="buy" onclick="sound()">Ø´Ø±Ø§Ø¡</button></div>
      </div>

      <!-- TICKETS -->
      <div id="tickets" class="section">
        <h3>ğŸ§¾ Ø§Ù„Ø´ÙƒØ§ÙˆÙŠ</h3>
        <input id="ticketText" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„Ø´ÙƒÙˆÙ‰">
        <button onclick="newTicket()">ÙØªØ­ Ø´ÙƒÙˆÙ‰</button>
        <div id="myTickets"></div>
      </div>

      <!-- ADMIN -->
      <div id="admin" class="section">
        <h3>ğŸ‘‘ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
        <div id="allTickets"></div>
      </div>

      <!-- CHAT -->
      <div id="chat" class="section">
        <h3>ğŸ’¬ Ø±ÙˆÙ… Ø§Ù„Ø´ÙƒÙˆÙ‰</h3>
        <div class="chat" id="chatBox"></div>
        <input id="chatMsg" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©">
        <button onclick="sendMsg()">Ø¥Ø±Ø³Ø§Ù„</button>
      </div>

    </div>
  </div>
</div>

<div class="footer">Â© Developed by Eyad Abo Gad</div>

<audio id="clickSound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3">
</audio>

<script>
const OWNER_CODE="OWNER-999";
let currentTicket=null;

/* SOUND */
function sound(){
  document.getElementById("clickSound").play();
}

/* LOGIN */
function login(){
  let u=username.value.trim();
  if(!u)return alert("Ø§ÙƒØªØ¨ Ø§Ø³Ù…Ùƒ");

  let role = (code.value===OWNER_CODE)?"Owner":"Player";
  localStorage.user=u;
  localStorage.role=role;

  start();
}

function start(){
  login.style.display="none";
  app.style.display="block";
  welcome.innerText="Ø£Ù‡Ù„Ø§Ù‹ "+localStorage.user;

  if(localStorage.role==="Owner"){
    ownerBtn.style.display="block";
  }
}

/* NAV */
function openSec(id){
  document.querySelectorAll(".section").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

/* TICKETS */
function newTicket(){
  let t=ticketText.value.trim();
  if(!t)return;
  let arr=JSON.parse(localStorage.tickets||"[]");
  arr.push({id:Date.now(),user:localStorage.user,msgs:[{from:"me",text:t}]});
  localStorage.tickets=JSON.stringify(arr);
  ticketText.value="";
  loadMyTickets();
}

function loadMyTickets(){
  let arr=JSON.parse(localStorage.tickets||"[]");
  myTickets.innerHTML="";
  arr.filter(x=>x.user===localStorage.user)
     .forEach(t=>myTickets.innerHTML+=`<div onclick="openChat(${t.id})">Ø´ÙƒÙˆÙ‰ #${t.id}</div>`);
}

function loadAllTickets(){
  let arr=JSON.parse(localStorage.tickets||"[]");
  allTickets.innerHTML="";
  arr.forEach(t=>allTickets.innerHTML+=`<div onclick="openChat(${t.id})">${t.user} - #${t.id}</div>`);
}

function openChat(id){
  currentTicket=id;
  openSec("chat");
  renderChat();
}

function renderChat(){
  let arr=JSON.parse(localStorage.tickets);
  let t=arr.find(x=>x.id===currentTicket);
  chatBox.innerHTML="";
  t.msgs.forEach(m=>chatBox.innerHTML+=`<div class="msg ${m.from}">${m.text}</div>`);
}

function sendMsg(){
  let txt=chatMsg.value.trim();
  if(!txt)return;
  let arr=JSON.parse(localStorage.tickets);
  let t=arr.find(x=>x.id===currentTicket);
  t.msgs.push({from:localStorage.role==="Owner"?"admin":"me",text:txt});
  localStorage.tickets=JSON.stringify(arr);
  chatMsg.value="";
  renderChat();
}

/* LOGOUT */
function logout(){
  localStorage.clear();
  location.reload();
}

window.onload=()=>localStorage.user&&start();
</script>

</body>
</html>
